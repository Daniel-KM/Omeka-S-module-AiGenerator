<?php
/**
 * @var \Zend\View\Renderer\PhpRenderer $this
 * @var \Omeka\Form\ResourceForm $form
 * @var \Omeka\Api\Representation\AbstractResourceEntityRepresentation $resource
 * @var \Correction\Api\Representation\CorrectionRepresentation|null $correction
 * @var array $fields
 */

$assetUrl = $this->plugin('assetUrl');
$this->headLink()
    ->appendStylesheet($assetUrl('css/correction.css', 'Correction'));
$this->headScript()
    ->appendFile($assetUrl('js/correction.js', 'Correction'), 'text/javascript', ['defer' => 'defer']);

$translate = $this->plugin('translate');
$this->htmlElement('body')->appendAttribute('class', 'edit items' . $this->params()->fromRoute('resource') . ' resource');

$mapLabels = [
    'items' => 'Item',
    'media' => 'Media',
    'item_sets' => 'Item set',
];
?>

<style>
.action::before {
    content: "\00b7";
    margin: 0 12px;
}
.action {
    display: inline-block;
    font-style: italic;
}
</style>
<div class="container">
    <h2 class="text-primary my-3"><?= $resource->displayTitle() ?></h2>
    <h3><?= sprintf($translate('Correct %s'), $translate($mapLabels[$resource->resourceName()])) ?></h3>
    <?= $this->messages() ?>
    <?php $this->trigger('view.edit.before'); ?>
    <?php
    echo $this->partial('correction/site/correction/form.phtml', [
        'form' => $form,
        'resource' => $resource,
        'correction' => $correction,
        'fields' => $fields,
        'action' => 'edit',
        'submitLabel' => $translate('Correct'),
    ]);
    ?>
</div>

<?php $this->trigger('view.edit.after'); ?>
